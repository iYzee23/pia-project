{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nconst _c0 = [\"fileInput\"];\nexport class ImageUploadComponent {\n  constructor() {\n    this.porukaEvent = new EventEmitter();\n    this.fileEvent = new EventEmitter();\n  }\n  onFileSelected(event) {\n    const file = event.target.files[0];\n    if (!file) {\n      this.fileEvent.emit(\"\");\n      return;\n    }\n    if (file.type.match('image/jpeg') || file.type.match('image/png')) this.handleImage(file);else this.porukaEvent.emit(\"Nepodrzan tip fajla. Izaberite sliku u PNG/JPEG formatu.\");\n  }\n  handleImage(file) {\n    const reader = new FileReader();\n    reader.onload = e => {\n      const img = new Image();\n      img.onload = () => {\n        if (img.width < 100 || img.height < 100) this.porukaEvent.emit(\"Slika je premala. Minimalna velicina slike je 100x100px.\");else if (img.width > 300 || img.height > 300) this.porukaEvent.emit(\"Slika je prevelika. Maksimalna velicina slike je 300x300px.\");else this.fileEvent.emit(e.target.result);\n      };\n      img.src = e.target.result;\n    };\n    reader.readAsDataURL(file);\n  }\n  handlePonisti() {\n    this.fileEvent.emit(\"\");\n    if (this.fileInput && this.fileInput.nativeElement) this.fileInput.nativeElement.value = '';\n  }\n  static #_ = this.ɵfac = function ImageUploadComponent_Factory(t) {\n    return new (t || ImageUploadComponent)();\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ImageUploadComponent,\n    selectors: [[\"app-image-upload\"]],\n    viewQuery: function ImageUploadComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.fileInput = _t.first);\n      }\n    },\n    outputs: {\n      porukaEvent: \"porukaEvent\",\n      fileEvent: \"fileEvent\"\n    },\n    decls: 4,\n    vars: 0,\n    consts: [[\"type\", \"file\", \"accept\", \"image/png, image/jpeg\", 3, \"change\"], [\"fileInput\", \"\"], [\"type\", \"button\", \"value\", \"Ponisti izbor\", 3, \"click\"]],\n    template: function ImageUploadComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"input\", 0, 1);\n        i0.ɵɵlistener(\"change\", function ImageUploadComponent_Template_input_change_0_listener($event) {\n          return ctx.onFileSelected($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(2, \"br\");\n        i0.ɵɵelementStart(3, \"input\", 2);\n        i0.ɵɵlistener(\"click\", function ImageUploadComponent_Template_input_click_3_listener() {\n          return ctx.handlePonisti();\n        });\n        i0.ɵɵelementEnd();\n      }\n    },\n    styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"names":["EventEmitter","ImageUploadComponent","constructor","porukaEvent","fileEvent","onFileSelected","event","file","target","files","emit","type","match","handleImage","reader","FileReader","onload","e","img","Image","width","height","result","src","readAsDataURL","handlePonisti","fileInput","nativeElement","value","_","_2","selectors","viewQuery","ImageUploadComponent_Query","rf","ctx","i0","ɵɵelementStart","ɵɵlistener","ImageUploadComponent_Template_input_change_0_listener","$event","ɵɵelementEnd","ɵɵelement","ImageUploadComponent_Template_input_click_3_listener"],"sources":["C:\\Fakultet\\IV godina\\VII semestar\\Programiranje internet aplikacija\\Projekat\\frontend\\src\\app\\components\\image-upload\\image-upload.component.ts","C:\\Fakultet\\IV godina\\VII semestar\\Programiranje internet aplikacija\\Projekat\\frontend\\src\\app\\components\\image-upload\\image-upload.component.html"],"sourcesContent":["import { Component, EventEmitter, Output, ViewChild, ElementRef } from '@angular/core';\n\n@Component({\n  selector: 'app-image-upload',\n  templateUrl: './image-upload.component.html',\n  styleUrls: ['./image-upload.component.css']\n})\nexport class ImageUploadComponent {\n  @Output() porukaEvent = new EventEmitter<string>();\n  @Output() fileEvent = new EventEmitter<string>();\n  @ViewChild('fileInput') fileInput!: ElementRef;\n\n  onFileSelected(event: any) {\n    const file = event.target.files[0];\n\n    if (!file) {\n      this.fileEvent.emit(\"\");\n      return;\n    }\n\n    if (file.type.match('image/jpeg') || file.type.match('image/png')) this.handleImage(file);\n    else this.porukaEvent.emit(\"Nepodrzan tip fajla. Izaberite sliku u PNG/JPEG formatu.\");\n  }\n\n  private handleImage(file: File) {\n    const reader = new FileReader();\n\n    reader.onload = (e: any) => {\n      const img = new Image();\n      img.onload = () => {\n        if (img.width < 100 || img.height < 100)\n          this.porukaEvent.emit(\"Slika je premala. Minimalna velicina slike je 100x100px.\");\n        else if (img.width > 300 || img.height > 300)\n          this.porukaEvent.emit(\"Slika je prevelika. Maksimalna velicina slike je 300x300px.\");\n        else\n          this.fileEvent.emit(e.target.result);\n      };\n      img.src = e.target.result;\n    };\n\n    reader.readAsDataURL(file);\n  }\n\n  handlePonisti() {\n    this.fileEvent.emit(\"\");\n    if (this.fileInput && this.fileInput.nativeElement)\n      this.fileInput.nativeElement.value = '';\n  }\n}\n","<input type=\"file\" #fileInput (change)=\"onFileSelected($event)\" accept=\"image/png, image/jpeg\"><br>\n<input type=\"button\" value=\"Ponisti izbor\" (click)=\"handlePonisti()\">\n"],"mappings":"AAAA,SAAoBA,YAAY,QAAuC,eAAe;;;AAOtF,OAAM,MAAOC,oBAAoB;EALjCC,YAAA;IAMY,KAAAC,WAAW,GAAG,IAAIH,YAAY,EAAU;IACxC,KAAAI,SAAS,GAAG,IAAIJ,YAAY,EAAU;;EAGhDK,cAAcA,CAACC,KAAU;IACvB,MAAMC,IAAI,GAAGD,KAAK,CAACE,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;IAElC,IAAI,CAACF,IAAI,EAAE;MACT,IAAI,CAACH,SAAS,CAACM,IAAI,CAAC,EAAE,CAAC;MACvB;;IAGF,IAAIH,IAAI,CAACI,IAAI,CAACC,KAAK,CAAC,YAAY,CAAC,IAAIL,IAAI,CAACI,IAAI,CAACC,KAAK,CAAC,WAAW,CAAC,EAAE,IAAI,CAACC,WAAW,CAACN,IAAI,CAAC,CAAC,KACrF,IAAI,CAACJ,WAAW,CAACO,IAAI,CAAC,0DAA0D,CAAC;EACxF;EAEQG,WAAWA,CAACN,IAAU;IAC5B,MAAMO,MAAM,GAAG,IAAIC,UAAU,EAAE;IAE/BD,MAAM,CAACE,MAAM,GAAIC,CAAM,IAAI;MACzB,MAAMC,GAAG,GAAG,IAAIC,KAAK,EAAE;MACvBD,GAAG,CAACF,MAAM,GAAG,MAAK;QAChB,IAAIE,GAAG,CAACE,KAAK,GAAG,GAAG,IAAIF,GAAG,CAACG,MAAM,GAAG,GAAG,EACrC,IAAI,CAAClB,WAAW,CAACO,IAAI,CAAC,0DAA0D,CAAC,CAAC,KAC/E,IAAIQ,GAAG,CAACE,KAAK,GAAG,GAAG,IAAIF,GAAG,CAACG,MAAM,GAAG,GAAG,EAC1C,IAAI,CAAClB,WAAW,CAACO,IAAI,CAAC,6DAA6D,CAAC,CAAC,KAErF,IAAI,CAACN,SAAS,CAACM,IAAI,CAACO,CAAC,CAACT,MAAM,CAACc,MAAM,CAAC;MACxC,CAAC;MACDJ,GAAG,CAACK,GAAG,GAAGN,CAAC,CAACT,MAAM,CAACc,MAAM;IAC3B,CAAC;IAEDR,MAAM,CAACU,aAAa,CAACjB,IAAI,CAAC;EAC5B;EAEAkB,aAAaA,CAAA;IACX,IAAI,CAACrB,SAAS,CAACM,IAAI,CAAC,EAAE,CAAC;IACvB,IAAI,IAAI,CAACgB,SAAS,IAAI,IAAI,CAACA,SAAS,CAACC,aAAa,EAChD,IAAI,CAACD,SAAS,CAACC,aAAa,CAACC,KAAK,GAAG,EAAE;EAC3C;EAAC,QAAAC,CAAA,G;qBAxCU5B,oBAAoB;EAAA;EAAA,QAAA6B,EAAA,G;UAApB7B,oBAAoB;IAAA8B,SAAA;IAAAC,SAAA,WAAAC,2BAAAC,EAAA,EAAAC,GAAA;MAAA,IAAAD,EAAA;;;;;;;;;;;;;;;;;QCPjCE,EAAA,CAAAC,cAAA,kBAA+F;QAAjED,EAAA,CAAAE,UAAA,oBAAAC,sDAAAC,MAAA;UAAA,OAAUL,GAAA,CAAA9B,cAAA,CAAAmC,MAAA,CAAsB;QAAA,EAAC;QAA/DJ,EAAA,CAAAK,YAAA,EAA+F;QAAAL,EAAA,CAAAM,SAAA,SAAI;QACnGN,EAAA,CAAAC,cAAA,eAAqE;QAA1BD,EAAA,CAAAE,UAAA,mBAAAK,qDAAA;UAAA,OAASR,GAAA,CAAAV,aAAA,EAAe;QAAA,EAAC;QAApEW,EAAA,CAAAK,YAAA,EAAqE"},"metadata":{},"sourceType":"module","externalDependencies":[]}